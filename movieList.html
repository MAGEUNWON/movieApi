<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MovieList</title>
  <!-- <script type="module" src="./movieApi.js" defer></script> -->
</head>
<body>
  <div id = "root"></div>

  <script>

    const root = document.getElementById("root");
    console.log(root);


    class ApiData{
      constructor(rank, title, openDt){
        this.rank = rank;
        this.title =title;
        this.openDt = openDt;
      }
    }

    function movie (){
      let totalData = [];
        const api_KEY = '19d2a86ba729ecb37eccaba04437d50b';
        const targetDt = '20220915';
        const api_URL = `http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=${api_KEY}&targetDt=${targetDt}`;
        const request = new XMLHttpRequest();
        request.open("GET", api_URL);
        request.responseType = "json";
        request.send();
        request.addEventListener("load", ()=>{
          const data = request.response;
          console.log(data);
          // console.log(data);
          const List = data.boxOfficeResult.dailyBoxOfficeList;
          console.log(List);


          // for(let i = 0; i<count; i++){
            // let setObj = {
            //   id : List[count].rank,
            //   title : List[count].movieNm,
            //   openDt : List[count].openDt
            // }
            // console.log(setObj);

            let tempObject = new ApiData(setObj.id, setObj.title, setObj.openDt);
          // }

          List.forEach((value)=>{
            totalData.push(new ApiData(value.rank,value.movieNm,value.openDt));
          })
          
          totalData.push(tempObject);
          console.log(totalData);
        });
        
    }
    movie();


    // let j = 0;
    // for(let i = 0; i<10; i++){
    //   j++
    //   movie(count);
    // };


    
  
    
    

    // function Date(){
    //   const api_KEY = '19d2a86ba729ecb37eccaba04437d50b';
    //   const targetDt = '20220915';
    //   const api_URL = `http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=${api_KEY}&targetDt=${targetDt}`;
    //   const request = new XMLHttpRequest();
    //     request.open("GET", api_URL);
    //     request.responseType = "json";
    //     request.send();
    //     request.addEventListener("load", ()=>{
    //       const data = request.response;
    //       console.log(`일별 박스오피스 : `);
    //       console.log(data);
    //       const List = data.boxOfficeResult.dailyBoxOfficeList;
    //       console.log(List);
          

    //     });
    //   }
    //   Date();


    

      

    // function MovieList(){
    //   const api_KEY = '19d2a86ba729ecb37eccaba04437d50b';
    //   const curPage = "1";
    //   const itemPerPage = '10';
    //   const api_URL = `http://kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieList.json?key=${api_KEY}&curPage=${curPage}&itemPerPage=${itemPerPage}`;
    //   const request = new XMLHttpRequest();
    //     request.open("GET", api_URL);
    //     request.responseType = "json";
    //     request.send();
    //     request.addEventListener("load", ()=>{
    //       const data = request.response;
    //       console.log(`영화 리스트 : `);
    //       console.log(data);
    //       const List = data.movieListResult.movieList;
    //       // for(const key in List){
    //       //   console.log(`${key} : ${List[key]}`);
    //       // }
    //       // Array.from(List);
    //       // console.log(Array.isArray(List));
          
    //     });
    // }
    // MovieList();

    // function actorList(){
    //   const api_KEY = '19d2a86ba729ecb37eccaba04437d50b';
    //   const peopleNm = '이정재';
    //   const api_URL = `http://kobis.or.kr/kobisopenapi/webservice/rest/people/searchPeopleList.json?key=${api_KEY}&peopleNm=${peopleNm}`;
    //   const request = new XMLHttpRequest();
    //     request.open("GET", api_URL);
    //     request.responseType = "json";
    //     request.send();
    //     request.addEventListener("load", ()=>{
    //       const date = request.response;
    //       console.log('영화배우');
    //       console.log(date);
    //     });
    // }

    // actorList();

    

  </script>

</body>
</html>